<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- Admin Sidebar Fragment -->
<div th:fragment="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h1>LinkVault</h1>
        <p>Admin Panel</p>
        <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;"
           sec:authentication="name">admin</p>
    </div>

    <div class="sidebar-section">
        <th:block th:if="${adminMenuItems != null and !adminMenuItems.isEmpty()}">
            <th:block th:each="item : ${adminMenuItems}">
                <a th:href="${item.url}" class="sidebar-link" th:text="${item.label}">Menu Item</a>
            </th:block>
        </th:block>
        <!-- Fallback if no dynamic menus yet -->
        <th:block th:if="${adminMenuItems == null or adminMenuItems.isEmpty()}">
            <a href="/admin" class="sidebar-link" sec:authorize="hasAuthority('VIEW_STATS')">Dashboard</a>
            <a href="/admin/users" class="sidebar-link" sec:authorize="hasAuthority('MANAGE_USERS')">Users</a>
            <a href="/admin/bookmarks" class="sidebar-link" sec:authorize="hasAuthority('MANAGE_BOOKMARKS')">All Bookmarks</a>
            <a href="/admin/tags" class="sidebar-link" sec:authorize="hasAuthority('MANAGE_TAGS')">Tag Management</a>
            <a href="/admin/audit" class="sidebar-link" sec:authorize="hasAuthority('VIEW_AUDIT_LOG')">Audit Log</a>
            <a href="/admin/backup" class="sidebar-link" sec:authorize="hasAuthority('MANAGE_BACKUP')">Backup / Restore</a>
            <a href="/admin/permissions" class="sidebar-link" sec:authorize="hasRole('ROLE_SUPER_ADMIN')">Permissions</a>
        </th:block>
    </div>

    <div class="sidebar-section" style="margin-top: auto; border-top: 1px solid var(--border); padding-top: 12px;">
        <a href="/" class="sidebar-link">Back to App</a>
        <form th:action="@{/logout}" method="post" style="margin: 0;">
            <button type="submit" class="sidebar-link" style="background: none; border: none; width: 100%; text-align: left; cursor: pointer; color: var(--text-secondary); font-size: 0.875rem; padding: 6px 12px;">
                Logout
            </button>
        </form>
    </div>
</div>

</html>
